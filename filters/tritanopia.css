/* 
 * Improved tritanopia (blue-blind) filter
 * Uses proper filters for images and content
 */

/* Basic page content filter */
html {
  filter: brightness(1.05) saturate(1.0) !important;
}

/* Special image filter that properly simulates tritanopia */
img, video, canvas, svg, [style*="background-image"] {
  /* This filter matrix was designed to simulate tritanopia accurately */
  filter: url('data:image/svg+xml,\
    <svg xmlns="http://www.w3.org/2000/svg">\
      <filter id="tritanopia">\
        <feColorMatrix type="matrix" values="\
          0.95, 0.05,  0,     0, 0 \
          0,    0.433, 0.567, 0, 0 \
          0,    0.475, 0.525, 0, 0 \
          0,    0,     0,     1, 0"/>\
      </filter>\
    </svg>#tritanopia') !important;
}

/* Fallback filter for browsers that don't support SVG filters */
@supports not (filter: url('#tritanopia')) {
  img, video, canvas, svg, [style*="background-image"] {
    filter: grayscale(40%) sepia(30%) hue-rotate(170deg) saturate(150%) !important;
  }
}

/* Add visual indicators for important blue/yellow elements */
[style*="color: blue"], [style*="color:#00f"], [style*="color:#0000ff"],
[style*="color: #00f"], [style*="color: #0000ff"],
[style*="color: yellow"], [style*="color:#ff0"], [style*="color:#ffff00"],
[style*="color: #ff0"], [style*="color: #ffff00"] {
  border-bottom: 1px dotted #000 !important;
  font-weight: bold !important;
}

/* Add patterns to differentiate blue links and elements */
a:link, a:visited, [role="link"] {
  text-decoration: underline !important;
  text-decoration-style: double !important;
  font-weight: bold !important;
}

/* Add special indicator for blue UI elements */
.btn-primary, .btn-info, [class*="primary"], [class*="info"] {
  position: relative !important;
  background-image: linear-gradient(135deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent) !important;
  background-size: 20px 20px !important;
}